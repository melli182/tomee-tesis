/*C3*/SET SCHEMA PUBLIC
alter table CONTROLADORES drop constraint FK574B3F1AB0B1F87
alter table CRUCES_CALLES drop constraint FKFE4971A0A02CFE80
alter table CRUCES_CALLES drop constraint FKFE4971A0D95049CB
alter table CRUCES_SEMAFOROS drop constraint FKAAB7BE13A02CFE80
alter table CRUCES_SEMAFOROS drop constraint FKAAB7BE13E6C48F29
alter table CruceSemaforos drop constraint FKC658CFF34E4AFB2
alter table Etapa_Semaforo drop constraint FKE41B5328A45A510F
alter table Etapa_Semaforo drop constraint FKE41B53281D56ED71
alter table PLANES_Etapa drop constraint FK9B5D863BA1E0D8BD
alter table PLANES_Etapa drop constraint FK9B5D863B875CBCE2
alter table Semaforo drop constraint FK4C5E1D4C96655311
drop table CONTROLADORES if exists
drop table CRUCES_CALLES if exists
drop table CRUCES_SEMAFOROS if exists
drop table Calle if exists
drop table CruceSemaforos if exists
drop table Etapa if exists
drop table Etapa_Semaforo if exists
drop table PLANES if exists
drop table PLANES_Etapa if exists
drop table Semaforo if exists
drop table Usuario if exists
create table CONTROLADORES (id_controlador bigint generated by default as identity (start with 1), info_hw varchar(255), ip varchar(255), version_sw varchar(255), CRUCES_idCruce bigint, primary key (id_controlador))
create table CRUCES_CALLES (cruce_id bigint not null, calle_id bigint not null)
create table CRUCES_SEMAFOROS (cruce_id bigint not null, semaforo_id bigint not null)
create table Calle (id bigint generated by default as identity (start with 1), nombre varchar(255), primary key (id))
create table CruceSemaforos (id_cruce_semaforos bigint generated by default as identity (start with 1), nombre varchar(255), latitud double not null, longitud double not null, PLANES_idPlanes bigint, primary key (id_cruce_semaforos))
create table Etapa (id_etapa bigint generated by default as identity (start with 1), nombre varchar(255), segundosLuzAmarilla double not null, segundosLuzVerde double not null, primary key (id_etapa))
create table Etapa_Semaforo (Etapa_id_etapa bigint not null, semaforosInvolucrados_id bigint not null, unique (semaforosInvolucrados_id))
create table PLANES (id_plan bigint generated by default as identity (start with 1), primary key (id_plan))
create table PLANES_Etapa (PLANES_id_plan bigint not null, etapas_id_etapa bigint not null, unique (etapas_id_etapa))
create table Semaforo (id bigint generated by default as identity (start with 1), nombre varchar(255), orientacion double not null, pinLuzAmarilla integer not null, pinLuzRoja integer not null, pinLuzVerde integer not null, CALLES_idCalle bigint, primary key (id))
create table Usuario (id bigint generated by default as identity (start with 1), nombre varchar(255), password varchar(255), primary key (id))
alter table CONTROLADORES add constraint FK574B3F1AB0B1F87 foreign key (CRUCES_idCruce) references CruceSemaforos
alter table CRUCES_CALLES add constraint FKFE4971A0A02CFE80 foreign key (cruce_id) references CruceSemaforos
alter table CRUCES_CALLES add constraint FKFE4971A0D95049CB foreign key (calle_id) references Calle
alter table CRUCES_SEMAFOROS add constraint FKAAB7BE13A02CFE80 foreign key (cruce_id) references CruceSemaforos
alter table CRUCES_SEMAFOROS add constraint FKAAB7BE13E6C48F29 foreign key (semaforo_id) references Semaforo
alter table CruceSemaforos add constraint FKC658CFF34E4AFB2 foreign key (PLANES_idPlanes) references PLANES
alter table Etapa_Semaforo add constraint FKE41B5328A45A510F foreign key (Etapa_id_etapa) references Etapa
alter table Etapa_Semaforo add constraint FKE41B53281D56ED71 foreign key (semaforosInvolucrados_id) references Semaforo
alter table PLANES_Etapa add constraint FK9B5D863BA1E0D8BD foreign key (PLANES_id_plan) references PLANES
alter table PLANES_Etapa add constraint FK9B5D863B875CBCE2 foreign key (etapas_id_etapa) references Etapa
alter table Semaforo add constraint FK4C5E1D4C96655311 foreign key (CALLES_idCalle) references Calle
